<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>单例模式</title>
	<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
	<script>
// 1、两个独立的对象 建立2个  一个xiaowang  一个是xiaoli
// 2、让xiaoli跟xiaowang通过门铃通信
// 3、先看xiaowang家有没有门 如果有门直接通过门铃通讯 如果没有先建立门
// 4、两个单例开始通信

	var xiaowang=(function(argument){
		var xiaowangjia=function(message){
			this.menling=message;
		};
		var men;
		var info={
			sendmessage:function(message){
				if(!men){
					men=new xiaowangjia(message);
				}
				return men;
			}
		};
		return info;
	})();

	var xiaoli={
		callxiaowang:function(msg){
			var _xw= xiaowang.sendmessage(msg);
			//alert(_xw.menling);

			//闭包函数调用完了之后设成空，放置内存泄漏
			_xw=null;//销毁内存
		}
	};


	xiaoli.callxiaowang('didi');
	</script>
<a id="a" href="javascript:">a</a>
<a id="d" href="javascript:">d</a>
	<script>

	//各自定义自己的对象，保证自己的变量不受外部的干扰，还可以互相通信
	var aaa={
		init:function(){
			this.render();
			this.bind();
		},
		b:5,
		render:function(){
			var me=this;
			//这个this指的是aaa对象
			console.log(this);
		},
		bind:function(){
			var me=this;
			$("#a").click(function(){
				me.test();
			});
		},
		test:function(){
			b=8;
			console.log(b);
			console.log(this.b);
		}
	};

	var bbb={
		init:function(){
			this.render();
			this.bind();
		},
		b:7,
		render:function(){
			var me=this;
			//这个this指的是aaa对象
			console.log(this);
		},
		bind:function(){
			var me=this;
			$("#d").click(function(){
				me.test();
			});
		},
		test:function(){
			// b=10;
			// console.log(b);
			// console.log(this.b);
			console.log(aaa.test()); //这样的好处还可以跟a通信，取到对象a里面的变量
		}
	};

	aaa.init();
	bbb.init();

	console.log(aaa.test());//在全局环境下同样可以调用




	</script>
</body>
</html>